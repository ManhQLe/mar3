!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t)}return o(t,[{key:"onCommunication",value:function(t,e,n){}},{key:"onConnection",value:function(t,e){}}],[{key:"connect",value:function(t,e,n,r){t.onConnection(e,r||n),e.onConnection(t,n)}},{key:"vibrate",value:function(t,e,n,r){t.onCommunication(r,e,n)}}]),t}();t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),u=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.__={agreement:t||{},contacts:null},n.createProp("agreement",void 0,e.CONST.defaultGet,e.CONST.defaultSet,n.__),n.createProp("contacts",void 0,e.CONST.defaultGet,e.CONST.defaultSet,n.__),n}return i(e,t),c(e,[{key:"createProp",value:function(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.__.agreement;e.createProp(this,t,n,r,o,i)}},{key:"isSameConnectionPoint",value:function(t,e){return t===e}}],[{key:"createProp",value:function(t,n,r,o,i,c){o||(o=e.CONST.defaultGet),i||(i=e.CONST.defaultSet),Object.defineProperty(t,n,{get:function(){return o.call(this,n,c,r)},set:function(t){i.call(this,n,c,t)}})}}]),e}(a);u.CONST={noSet:function(){},defaultGet:function(t,e,n){return!(e.hasOwnProperty(t)||void 0===n)&&(this[t]=n),e[t]},defaultSet:function(t,e,n){e[t]=n}},t.exports=u},function(t,e,n){"use strict";var r=n(0),o=n(3),i=n(4),c=n(1);t.exports={Clay:r,Conduit:o,RClay:i,AttribClay:c}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),u=n(1),f=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.contacts=[],n.createProp("ParallelTrx",!0),n}return i(e,t),c(e,[{key:"onConnection",value:function(t,n){var r=this.contacts.find(function(e){var n=e.clay;return t===n});r||(r={clay:null,cps:[]},this.contacts.push(r));var o=r,i=(o.clay,o.cps);if(!(t instanceof e)){var c=!0,a=!0,u=!1,f=void 0;try{for(var s,l=i[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var p=s.value;if(this.isSameConnectionPoint(p,n)){c=!1;break}}}catch(t){u=!0,f=t}finally{try{!a&&l.return&&l.return()}finally{if(u)throw f}}c&&(r.clay=t,i.push(n))}}},{key:"onCommunication",value:function(t,e,n){var r=this,o=this.contacts.find(function(e){return e.clay===t});if(o&&o.cps.find(function(t){return r.isSameConnectionPoint(t,e)})){var i=!0,c=!1,u=void 0;try{for(var f,s=this.contacts[Symbol.iterator]();!(i=(f=s.next()).done);i=!0){var l=f.value;!function(o){var i=o.cps,c=o.clay;i.forEach(function(o){r.isSameConnectionPoint(o,e)&&c===t||(r.ParallelTrx?setTimeout(a.vibrate,0,c,o,n,r):c.onCommunication(r,o,n))})}(l)}}catch(t){c=!0,u=t}finally{try{!i&&s.return&&s.return()}finally{if(c)throw u}}}}},{key:"link",value:function(t){for(var e=0;e<t.length;e+=2)a.connect(t[e],this,t[e+1]);return this}}]),e}(u);f.createLink=function(){for(var t=new f,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.link(n)},f.fromArray=function(t){return(new f).link(t)},t.exports=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){var e,n,r,o=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=new Set,n=0,r=regeneratorRuntime.mark(function r(){var i,c,a,u,f,l,p,y;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return void(r.next=2);case 2:i=r.sent,c=i.connectPoint,a=i.signal,1==++n&&t.onInit(),u=t.__,f=u.contacts,l=u.signalStore,p=t.connectPoints,p.indexOf(c)>=0?(l[c]=a,e.add(c),e.size===p.length&&(t.staged&&e.clear(),t.onResponse(c))):(y=f.get(c))&&y.forEach(function(e){return s.vibrate(e,c,a,t)});case 9:case"end":return r.stop()}},r,o)});case 3:return i.delegateYield(r(),"t0",5);case 5:i.next=3;break;case 7:case"end":return i.stop()}},f,this)}function a(t,e,n){1==++t.__.init&&t.onInit();var r=t.__,o=r.contacts,i=r.signalStore,c=r.collected,a=t.connectPoints;if(a.indexOf(e)>=0)i[e]=n,c.add(e),c.size===a.length&&(t.staged&&c.clear(),t.onResponse(e));else{var u=o.get(e);u&&u.forEach(function(r){return s.vibrate(r,e,n,t)})}}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=regeneratorRuntime.mark(c),s=n(0),l=n(1),p=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.contacts=new Map,n.__.signalStore={},n.__.sensor=c(n),n.__.init=0,n.__.collected=new Set,n.createProp("staged",!1),n.createProp("connectPoints",[]),n.createProp("response",function(){}),n.createProp("init",function(){}),n.__.center=new Proxy(n,{get:function(t,e){return t.__.signalStore[e]},set:function(t,e,n){return a(t,e,n),!0}}),n.__.sensor.next(),n}return i(e,t),u(e,[{key:"onConnection",value:function(t,e){var n=this.contacts,r=n.get(e);r||(r=[]),r.indexOf(t)<0&&r.push(t),n.set(e,r)}},{key:"onCommunication",value:function(t,e,n){var r=this,o=this.contacts,i=this.connectPoints,c=o.get(e);i.find(function(t){return r.isSameConnectionPoint(t,e)})&&c&&c.indexOf(t)>=0&&(this.__.center[e]=n)}},{key:"onResponse",value:function(t){this.response(this.__.center)}},{key:"onInit",value:function(){this.init()}},{key:"getCenter",value:function(){return this.__.center}}]),e}(l);t.exports=p}]);