!function(n){function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e={};t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=3)}([function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),i=function(){function n(){o(this,n)}return r(n,[{key:"onCommunication",value:function(n,t,e){}},{key:"onConnection",value:function(n,t){}}],[{key:"connect",value:function(n,t,e,o){n.onConnection(t,e),t.onConnection(n,o||e)}},{key:"vibrate",value:function(n,t,e,o){n.onCommunication(o,t,e)}}]),n}();n.exports=i},function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function r(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function i(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var c=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),u=e(0),a=function(n){function t(n){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return e.__={agreement:n||{},contacts:null},e.createProp("agreement",void 0,t.CONST.defaultGet,t.CONST.defaultSet,e.__),e.createProp("contacts",void 0,t.CONST.defaultGet,t.CONST.defaultSet,e.__),e}return i(t,n),c(t,[{key:"createProp",value:function(n,e,o,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.__.agreement;t.createProp(this,n,e,o,r,i)}},{key:"getAgreement",value:function(){return this.__.agreement}},{key:"isSameConnectionPoint",value:function(n,t){return n===t}}],[{key:"createProp",value:function(n,e,o,r,i,c){r||(r=t.CONST.defaultGet),i||(i=t.CONST.defaultSet),Object.defineProperty(n,e,{get:function(){return r.call(this,e,c,o)},set:function(n){i.call(this,e,c,n)}})}}]),t}(u);a.CONST={noSet:function(){},defaultGet:function(n,t,e){return!(t.hasOwnProperty(n)||void 0===e)&&(this[n]=e),t[n]},defaultSet:function(n,t,e){t[n]=e}},n.exports=a},function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function r(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function i(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var c=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),u=e(0),a=e(1),f=function(n){function t(n){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return e.contacts=[],e.createProp("ParallelTrx",!0),e}return i(t,n),c(t,[{key:"onConnection",value:function(n,e){if(n!==this){var o=this.contacts.find(function(t){var e=t.clay;return n===e});if(!(o&&n instanceof t)){o||(o={clay:n,cps:[]},this.contacts.push(o));var r=o,i=r.cps,c=!0,u=!0,a=!1,f=void 0;try{for(var l,s=i[Symbol.iterator]();!(u=(l=s.next()).done);u=!0){var p=l.value;if(this.isSameConnectionPoint(p,e)){c=!1;break}}}catch(n){a=!0,f=n}finally{try{!u&&s.return&&s.return()}finally{if(a)throw f}}c&&(o.clay=n,i.push(e))}}}},{key:"onCommunication",value:function(n,t,e){var o=this,r=this.contacts.find(function(t){return t.clay===n});if(r&&r.cps.find(function(n){return o.isSameConnectionPoint(n,t)})){var i=!0,c=!1,a=void 0;try{for(var f,l=this.contacts[Symbol.iterator]();!(i=(f=l.next()).done);i=!0){var s=f.value;!function(r){var i=r.cps,c=r.clay;i.forEach(function(r){o.isSameConnectionPoint(r,t)&&c===n||(o.ParallelTrx?setTimeout(u.vibrate,0,c,r,e,o):c.onCommunication(o,r,e))})}(s)}}catch(n){c=!0,a=n}finally{try{!i&&l.return&&l.return()}finally{if(c)throw a}}}}},{key:"link",value:function(n){for(var t=0;t<n.length;t+=2)u.connect(n[t],this,n[t+1]);return this}}]),t}(a);f.createLink=function(){for(var n=new f,t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return n.link(e)},f.link=function(n,t,e,o){return f.fromArray([n,t,o,e])},f.fromArray=function(n){return(new f).link(n)},n.exports=f},function(n,t,e){"use strict";var o=e(0),r=e(2),i=e(4),c=e(1),u=e(5);window.mosyrejs={Clay:o,Conduit:r,RClay:i,AttribClay:c,SClay:u}},function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function r(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function i(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function c(n,t,e){var o=n.__,r=o.contacts,i=o.signalStore,c=o.collected,u=n.connectPoints;if(u.findIndex(function(e){return n.isSameConnectionPoint(e,t)})>=0)i[t]=e,c.add(t),c.size===u.length&&(n.staged&&c.clear(),n.onResponse(t));else{var f=r.find(function(e){return n.isSameConnectionPoint(e.cp,t)});f&&f.clays.forEach(function(o){return a.vibrate(o,t,e,n)})}}var u=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),a=e(0),f=e(1),l=function(n){function t(n){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return e.contacts=[],e.__.signalStore={},e.__.collected=new Set,e.createProp("staged",!1),e.createProp("connectPoints",[]),e.createProp("response",function(){}),e.createProp("init",function(){}),e.__.center=new Proxy(e,{get:function(n,t){return n.__.signalStore[t]},set:function(n,t,e){return c(n,t,e),!0}}),e.onInit(),e}return i(t,n),u(t,[{key:"onConnection",value:function(n,t){var e=this,o=this.contacts,r=o.find(function(n){return e.isSameConnectionPoint(n.cp,t)});r||(r={clays:[],cp:t},o.push(r));var i=r,c=i.clays;i.cp;c.findIndex(function(t){return t===n})>=0||c.push(n)}},{key:"onCommunication",value:function(n,t,e){var o=this,r=this.contacts,i=this.connectPoints,c=r.find(function(n){return o.isSameConnectionPoint(n.cp,t)});i.find(function(n){return o.isSameConnectionPoint(n,t)})&&c&&c.clays.findIndex(function(t){return t===n})>=0&&(this.__.center[t]=e)}},{key:"onResponse",value:function(n){this.response(this.__.center,this)}},{key:"onInit",value:function(){this.init(this)}},{key:"getCenter",value:function(){return this.__.center}}]),t}(f);n.exports=l},function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function r(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function i(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var c=function(){function n(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),u=(e(0),e(2)),a=e(1),f=function(n){function t(n){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return e.createProp("layoutMap",[]),e.createProp("build",function(n){return n.agreement.layoutMap}),e.__.map=e.onBuild(),e.links=[],e.__.map.forEach(function(n){var t=n.ip,o=n.connections;if(t){var r=e.links.find(function(n){return e.isSameConnectionPoint(t,n.cp)});r?r.conduit.link(o):(r={cp:t,link:u.fromArray(o)},e.links.push(r))}else u.fromArray(o)}),e}return i(t,n),c(t,[{key:"onCommunication",value:function(n,t,e){}},{key:"onConnection",value:function(n,t){var e=this,o=this.links.find(function(n){return e.isSameConnectionPoint(t,n.cp)});o&&o.link.link([n,t])}},{key:"onBuild",value:function(){return this.build(this)}}]),t}(a);n.exports=f}]);